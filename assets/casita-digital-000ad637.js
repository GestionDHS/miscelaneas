import{P as r}from"./pg-event-320a5ad1.js";const t={houseContainer:null,houseMap:null,messageElement:null,lights:[],onLightsChange:l=>{},availableChars:[" ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","Ñ","O","P","Q","R","S","T","U","V","W","X","Y","Z",".",",","!","?"],setLightsValues:l=>{for(let e=0;e<l.length;e++)t.lights[e].value=l[e];t.updateMessage()},translateLightsToMessage:l=>{let e="";for(let a of l)e+=a.value;let c=parseInt(e,2);return t.availableChars[c]},updateText:l=>{const e=t.availableChars[l];t.messageElement.innerText.length>3?(t.messageElement.innerHTML=t.messageElement.innerHTML.slice(0,-1),setTimeout(()=>{t.updateText(l)},25)):t.messageElement.innerHTML+=e},updateMessage:()=>{window.scrollTo(0,1e4);let l="";for(let c of t.lights){let a=c.value;l+=a,a=="1"?(c.classList.add("prendida"),c.classList.remove("apagada")):(c.classList.remove("prendida"),c.classList.add("apagada"))}let e=parseInt(l,2);t.updateText(e)},createLights:()=>{let l=document.createElement("SELECT"),e=document.createElement("OPTION");e.innerHTML="1",e.value="1",l.appendChild(e);let c=document.createElement("OPTION");c.innerHTML="0",c.value="0",l.appendChild(c);for(let a=0;a<5;a++){let n=document.querySelector(".luz"+a),s=l.cloneNode(!0);s.value=0,s.addEventListener("change",()=>{t.onLightsChange(t.lights),t.updateMessage()}),n.appendChild(s),t.lights===void 0&&(t.lights=[]),t.lights.push(s)}},createHouse:(l,e)=>{for(let c of e){let a=document.createElement("TR");for(let n of c)if(n!="n"){let s=document.createElement("TD");s.classList.add(n),n.includes("luz")&&(s.setAttribute("colspan","2"),s.setAttribute("rowspan","2")),n.includes("mensaje")&&(s.setAttribute("colspan","4"),s.setAttribute("rowspan","3"),s.setAttribute("id","caja-mensajes")),a.appendChild(s)}l.appendChild(a)}},init:(l,e,c,a)=>{t.houseContainer=l,t.houseMap=e,t.messageElement=c,t.onLightsChange=a,t.createHouse(l,e),t.createLights()}},d=l=>{const e=new r,c=document.getElementById("casa"),a=[["c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c"],["c","c","c","c","c","c","c","c","ti","t","t","t","t","td","c","c","c","c","c","c","c","c"],["c","c","c","c","c","c","c","ti","t","t","t","t","t","t","td","c","c","c","c","c","c","c"],["c","c","c","c","c","c","ti","t","t","mensaje","n","n","n","t","t","td","c","c","c","c","c","c"],["c","c","c","c","c","ti","t","t","t","n","n","n","n","t","t","t","td","c","c","c","c","c"],["c","c","c","c","ti","t","t","t","t","n","n","n","n","t","t","t","t","td","c","c","c","c"],["c","c","c","ti","t","t","t","t","t","t","t","t","t","t","t","t","t","t","td","c","c","c"],["c","c","ti","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","td","c","c"],["c","tiab","p","bl","bl","bl","bl","bl","bl","bl","bl","bl","bl","bl","bl","bl","bl","bl","bl","p","tdab","c"],["c","c","p","bl","luz0","n","bl","luz1","n","bl","luz2","n","bl","luz3","n","bl","luz4","n","bl","p","c","c"],["c","c","p","bl","n","n","bl","n","n","bl","n","n","bl","n","n","bl","n","n","bl","p","c","c"],["v","v","p","bl","bl","bl","bl","bl","bl","bl","bl","bl","bl","bl","bl","bl","bl","bl","bl","p","v","v"],["v","v","p","p","p","p","p","p","p","p","p","p","p","p","p","p","p","p","p","p","v","v"],["v","v","v","v","v","v","v","v","v","v","v","v","v","v","v","v","v","v","v","v","v","v"],["v","v","v","v","v","v","v","v","v","v","v","v","v","v","v","v","v","v","v","v","v","v"]],n=document.getElementById("mensaje"),s=Object.create(t);s.init(c,a,n,i=>{if(s.translateLightsToMessage(i)!==l){e.postToPg({event:"FAILURE",message:"¡Oh no! Esa no es la letra correcta. Inténtalo de nuevo.",reasons:[],state:JSON.stringify({lights:Array.from(i).map(o=>parseInt(o.value))})});return}e.postToPg({event:"SUCCESS",message:"¡Felicidades! Has encontrado la letra correcta.",reasons:[],state:JSON.stringify({lights:Array.from(i).map(o=>parseInt(o.value))})})}),e.getValues(),e.data.lights&&s.setLightsValues(e.data.lights)};export{d as C};
